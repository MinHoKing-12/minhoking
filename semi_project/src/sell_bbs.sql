DROP TABLE SELL_BBS
CASCADE CONSTRAINTS;

DROP SEQUENCE SELL_SEQ;

CREATE TABLE SELL_BBS(
	SEQ NUMBER(8) PRIMARY KEY,
	ID VARCHAR2(20) NOT NULL,
	TITLE VARCHAR2(200) NOT NULL,
	CONTENT VARCHAR2(4000) NOT NULL,
	RCOUNT NUMBER(8) NOT NULL,
	ACOUNT NUMBER(8) NOT NULL,
	WDATE DATE,
	DEL NUMBER(1) NOT NULL,
	PRICE NUMBER(20) NOT NULL,
	CATEGORY VARCHAR2(20) NOT NULL,
	PCATEGORY VARCHAR2(20) NOT NULL,
	COMPLETE NUMBER(1) NOT NULL,
	REPORT NUMBER(8) NOT NULL,
	FILENAME VARCHAR2(50)
);

CREATE SEQUENCE SELL_SEQ
START WITH 1
INCREMENT BY 1;

ALTER TABLE SELL_BBS
ADD CONSTRAINT FK_SELL_BBS FOREIGN KEY(ID)
REFERENCES MEMBER(ID)

SELECT * FROM SELL_BBS ORDER BY SEQ;

SELECT SEQ, B.ID, TITLE, CONTENT, RCOUNT, ACOUNT, WDATE, DEL, PRICE, CATEGORY,
	PCATEGORY, COMPLETE, REPORT, FILENAME, M.NICKNAME
FROM SELL_BBS B, MEMBER M
WHERE B.ID = M.ID;

SELECT SEQ, NICKNAME, TITLE, CONTENT, RCOUNT, ACOUNT, WDATE, DEL, 
		  		    PRICE, CATEGORY, PCATEGORY, COMPLETE, REPORT, FILENAME 
		  		    FROM   
		  		    (SELECT ROW_NUMBER()OVER(ORDER BY WDATE DESC) AS RNUM, 
		  		    SEQ, NICKNAME, TITLE, CONTENT, RCOUNT, ACOUNT, WDATE, DEL, 
		  	  	    PRICE, CATEGORY, PCATEGORY, COMPLETE, REPORT, FILENAME 
		  		    FROM SELL_BBS 
		  		    WHERE DEL = 0
		  		    AND CATEGORY = '삽니다'
		  		    ORDER BY WDATE DESC)   
		  		    WHERE RNUM >=1 AND RNUM <=12 AND DEL = 0 
		  		    ORDER BY WDATE DESC ;
		  		    
SELECT * FROM SELL_BBS WHERE CATEGORY = '삽니다';	  		    
		  		    
SELECT SEQ, NICKNAME, TITLE, CONTENT, RCOUNT, ACOUNT, WDATE, DEL, 
		  		    PRICE, CATEGORY, PCATEGORY, COMPLETE, REPORT, FILENAME 
		  		    FROM   
		  		    (SELECT ROW_NUMBER()OVER(ORDER BY WDATE DESC) AS RNUM, 
		  		    SEQ, NICKNAME, TITLE, CONTENT, RCOUNT, ACOUNT, WDATE, DEL, 
		  	  	    PRICE, CATEGORY, PCATEGORY, COMPLETE, REPORT, FILENAME 
		  		    FROM SELL_BBS 
		  		    WHERE DEL = 0
		  		    AND NICKNAME = '오산넥팬' 
		  		    ORDER BY WDATE DESC)   
		  		    WHERE RNUM BETWEEN 0 AND 12 AND DEL = 0 
		  		    ORDER BY WDATE DESC
		  		    
SELECT SEQ, NICKNAME, TITLE, CONTENT, RCOUNT, ACOUNT, WDATE, DEL,
PRICE, CATEGORY, PCATEGORY, COMPLETE, REPORT, FILENAME
FROM SELL_BBS 
WHERE NICKNAME = '오산넥팬' AND DEL = 0;

